<!DOCTYPE html>
<html lang='en' prefix='og: http://ogp.me/ns#'>
    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <title>Penalty theory in dynasty puzzles - Andy Tockman</title>
        <script src='/js/comments-db3d7755.js'></script><script src='/js/spoiler-58a0d1c8.js'></script><link rel='stylesheet' href='/css/global-78d088e1.css'><link rel='stylesheet' href='/css/blog_penalty-theory-af8fc90f.css'>
        <link rel='apple-touch-icon' sizes='180x180' href='/apple-touch-icon.png'>
        <link rel='icon' type='image/png' sizes='32x32' href='/favicon-32x32.png'>
        <link rel='icon' type='image/png' sizes='16x16' href='/favicon-16x16.png'>
        <link rel='manifest' href='/site.webmanifest'>
        <link rel='mask-icon' href='/safari-pinned-tab.svg' color='#5bbad5'>
        <meta name='msapplication-TileColor' content='#da532c'>
        <meta name='theme-color' content='#ffffff'>
        <meta name='description' content='Nikoli-style pencil-and-paper logic puzzles, like Sudoku, Yajilin, and many more, have very simple rules. But you can often build puzzles that require thinking in really cool ways, seemingly totally unrelated to what the rules literally say.'>
        <meta property='og:title' content='Penalty theory in dynasty puzzles' />
        <meta property='og:type' content='website' />
        <meta property='og:url' content='https://tck.mn/blog/penalty-theory' />
        <meta property='og:image' content='https://tck.mn/img/dp.png' />
        <meta property='og:description' content='Nikoli-style pencil-and-paper logic puzzles, like Sudoku, Yajilin, and many more, have very simple rules. But you can often build puzzles that require thinking in really cool ways, seemingly totally unrelated to what the rules literally say.' />
        <meta property='og:site_name' content='Andy Tockman' />
    </head>
    <body>

        <header>
            <div><a href='/'>home</a></div><!--
            --><div><a href='/about'>about</a></div><!--
            --><div><a href='/'><img src='/img/dp.png' alt='logo' width=48 height=48></a></div><!--
            --><div><a href='/blog' class='active '>blog</a></div><!--
            --><div><a href='/contact'>contact</a></div>
        </header>

        <div id='subheader'>
            <span>
                <a href='/portfolio' class='secicon'>
<svg viewBox='-1 -1 2 2'><path class='secfill' d='m -0.17029317,0.7133394 v 0.1807002 h -0.14191098 q -0.23557252,0 -0.31598867,-0.070009 -0.0794702,-0.070009 -0.0794702,-0.2790918 V 0.3415326 q 0,-0.1428573 -0.051088,-0.1967834 -0.0501419,-0.054872 -0.18259222,-0.054872 h -0.0586566 v -0.1807004 h 0.0586566 q 0.13245033,0 0.18259222,-0.053926 0.051088,-0.053926 0.051088,-0.1977294 v -0.203406 q 0,-0.2090822 0.0794702,-0.2781456 0.0804162,-0.070009 0.31598867,-0.070009 h 0.14191098 v 0.179754 h -0.11636702 q -0.0983917,0 -0.13150418,0.039735 -0.0331127,0.039735 -0.0331127,0.1750236 v 0.1977294 q 0,0.1561021 -0.0463575,0.2194891 -0.0463577,0.063387 -0.165563,0.081362 0.11920529,0.019868 0.165563,0.084201 0.0463575,0.064333 0.0463575,0.219489 v 0.1939452 q 0,0.1362347 0.0331127,0.1759698 0.0331125,0.040681 0.13150418,0.040681 z' /><path class='secfill' d='m 0.17029347,0.7133394 h 0.114475 q 0.098392,0 0.1324503,-0.040681 0.034059,-0.040681 0.034059,-0.1759698 V 0.3027434 q 0,-0.155156 0.046357,-0.219489 0.0463578,-0.064333 0.164617,-0.084201 -0.1192053,-0.017976 -0.1655628,-0.081362 -0.0454116,-0.063387 -0.0454116,-0.2194891 v -0.1977294 q 0,-0.1333964 -0.034059,-0.1740775 -0.033113,-0.040681 -0.1324503,-0.040681 h -0.114475 v -0.179754 h 0.141911 q 0.2346264,0 0.3131504,0.070009 0.07947,0.069063 0.07947,0.2781456 v 0.203406 q 0,0.1428571 0.051088,0.1977294 0.052034,0.053926 0.1854304,0.053926 h 0.058657 v 0.1807002 h -0.058657 q -0.1333965,0 -0.1854304,0.054872 -0.051088,0.054872 -0.051088,0.1967834 v 0.2034058 q 0,0.2090823 -0.07947,0.2790918 -0.078524,0.070009 -0.3131504,0.070009 h -0.141911 z' />
</svg>
                    portfolio
                </a>
            </span><!--
            --><span>
                <a href='/music' class='secicon'>
<svg viewBox='-1 -1 2 2'><g transform='translate(0.0844448 0)'><path class='secfill' d='m 0.03158503,-0.980217 v 0.4945598 h -0.0316518 V -0.980217 Z m 0,0 c 0,0.3897131 0.40949543,0.6646883 0.40949543,1.0544014 0,0.1404549 -0.0296736,0.2789316 -0.0811078,0.4094954 -0.009891,0.015826 -0.0257171,0.023739 -0.0395648,0.023739 -0.0257171,0 -0.0514342,-0.021761 -0.0454995,-0.053412 0.0514342,-0.1206726 0.083086,-0.2492581 0.083086,-0.3798218 0,-0.2037586 -0.18595445,-0.4114737 -0.3264094,-0.5598416 z' /><rect class='secfill' rx='0.02' ry='0.02' height='1.6389214' width='0.064292759' y='-1' x='-0.032707691' /><path class='secfill' d='m -0.18216374,0.4619192 c 0.1088031,0 0.21364981,0.055391 0.21364981,0.1760632 0,0.140455 -0.10880311,0.2393669 -0.20178041,0.2947576 C -0.23953274,0.974283 -0.31866224,1 -0.39976994,1 c -0.1088031,0 -0.2136498,-0.055391 -0.2136498,-0.1760633 0,-0.1404549 0.1088031,-0.2393668 0.2017803,-0.2947575 0.069238,-0.041543 0.1483679,-0.06726 0.2294757,-0.06726 z' /></g>
</svg>
                    music
                </a>
            </span><!--
            --><span>
                <a href='/conlang' class='secicon'>
<svg viewBox='-1 -1 2 2'><path class='secfill' d='m -0.19972877,-0.25197233 c -0.00634,8.9377e-4 -0.0022,2.8711e-4 -5.323e-4,4.993e-5 -0.00335,0.001313 -0.0067,0.002694 -0.010012,0.004135 -0.00649,0.002975 -0.012767,0.00638 -0.018826,0.0101507 -0.00809,0.005161 -0.015234,0.011586 -0.022292,0.0180369 -0.011071,0.0101427 -0.020669,0.0216936 -0.029984,0.0334244 -0.012603,0.0159982 -0.023776,0.0330312 -0.034478,0.0503361 -0.012392,0.0201455 -0.023129,0.0412214 -0.033347,0.062531 -0.011099,0.0233783 -0.020774,0.0473859 -0.029989,0.0715565 -0.00919,0.0240703 -0.017138,0.0485792 -0.024634,0.073221 -0.00722,0.023065 -0.012524,0.046626 -0.016803,0.070391 -0.0043,0.023942 -0.00593,0.048204 -0.00663,0.07248 -7.203e-4,0.02679 0.00117,0.05352 0.00407,0.080131 0.0031,0.028019 0.00906,0.055568 0.016092,0.082827 0.00698,0.026958 0.016953,0.05294 0.028283,0.07833 0.010975,0.02447 0.025081,0.047266 0.040174,0.069362 0.015686,0.022643 0.03354,0.043626 0.052065,0.063966 0.018813,0.020423 0.039178,0.039308 0.060024,0.057619 0.021261,0.018569 0.043803,0.035571 0.066595,0.052195 0.022642,0.016522 0.046241,0.031649 0.070118,0.046306 0.022597,0.013884 0.045898,0.026547 0.069575,0.038478 0.02162,0.011034 0.044171,0.019953 0.067212,0.027502 0.022864,0.00733 0.04649,0.011556 0.070254,0.014584 0.025076,0.00307 0.050339,0.00309 0.075536,0.0021 0.025918,-0.00106 0.051532,-0.00504 0.076888,-0.01031 0.02654,-0.00581 0.052399,-0.014205 0.077946,-0.023359 0.024553,-0.00883 0.048236,-0.019772 0.07135,-0.031823 0.021024,-0.010997 0.040662,-0.024299 0.05958,-0.038555 0.018173,-0.013675 0.034296,-0.029673 0.049425,-0.046582 0.016184,-0.018461 0.029838,-0.038878 0.042679,-0.059742 0.013613,-0.022063 0.024457,-0.045572 0.033924,-0.069654 0.00983,-0.025467 0.016126,-0.052024 0.021304,-0.078761 0.00534,-0.028744 0.00749,-0.057911 0.00875,-0.087076 0.00125,-0.032344 -3.997e-4,-0.064676 -0.00312,-0.096897 -0.00274,-0.03194 -0.0088,-0.063404 -0.016162,-0.094557 -0.007,-0.029067 -0.016539,-0.057391 -0.027294,-0.085255 -0.00994,-0.02544 -0.021993,-0.049952 -0.035071,-0.073904 -0.011783,-0.021638 -0.02573,-0.0419381 -0.040567,-0.061567 -0.013803,-0.0182034 -0.029538,-0.0347561 -0.045888,-0.0506599 -0.016437,-0.0157368 -0.034147,-0.0300343 -0.052264,-0.0437704 -0.018558,-0.0138963 -0.038037,-0.0264884 -0.05767,-0.0387952 -0.019093,-0.0120122 -0.038856,-0.0228802 -0.058863,-0.0332768 -0.019125,-0.009894 -0.038699,-0.018867 -0.058431,-0.0274689 -0.018282,-0.007914 -0.036822,-0.015217 -0.055561,-0.0219737 -0.016976,-0.005942 -0.03422,-0.0110767 -0.051527,-0.0159585 -0.014369,-0.004179 -0.029052,-0.007017 -0.043805,-0.009411 -0.014938,-0.002302 -0.029985,-0.003771 -0.045026,-0.005206 -0.014707,-0.001333 -0.029431,-0.002467 -0.0441600017,-0.003531 -0.0122529983,-9.0126e-4 -0.0245129983,-0.00168 -0.0367889983,-0.002179 -0.010345,-3.8198e-4 -0.020695,-5.3177e-4 -0.031046,-3.8947e-4 -0.00836,1.2483e-4 -0.016703,5.6672e-4 -0.025011,0.001473 -0.00742,8.6631e-4 -0.014755,0.002362 -0.022026,0.004074 -0.00936,0.002292 -0.018611,0.005022 -0.02787,0.007694 -0.00981,0.002836 -0.019622,0.00566 -0.029432,0.008495 -0.00443,0.001311 -0.00886,0.002591 -0.013234,0.004084 -0.1152399,0.0383118 -0.1694232,-0.12465934 -0.0541853,-0.16297273 v 0 c 0.00654,-0.002152 0.013108,-0.004205 0.019727,-0.006101 0.00984,-0.002844 0.019679,-0.005675 0.029516,-0.008519 0.012252,-0.003535 0.024501,-0.007106 0.036914,-0.0100384 0.014161,-0.003226 0.028431,-0.006023 0.042889,-0.007545 0.01348,-0.001361 0.027,-0.002234 0.040553,-0.002374 0.01343,-1.498e-4 0.02686,-1.75e-6 0.040282,5.2178e-4 0.014051,5.8669e-4 0.028088,0.001438 0.042113,0.002482 0.016041,0.001163 0.032078,0.002399 0.048095,0.003861 0.018872,0.001805 0.037744,0.00372 0.056475,0.006691 0.021126,0.00349 0.04214,0.007671 0.062729,0.0136222 0.02125,0.006016 0.04242,0.012353 0.063243,0.0197285 0.022193,0.008051 0.044184,0.0166555 0.065838,0.0260705 0.02331,0.0101862 0.046431,0.020814 0.06902,0.0325284 0.02408,0.0125507 0.047866,0.0256708 0.070855,0.0401454 0.023973,0.015057 0.04772,0.0305166 0.070342,0.0475631 0.023707,0.0180698 0.046867,0.0368899 0.06832,0.0576248 0.02251,0.0220596 0.044126,0.0450538 0.063118,0.0702645 0.019806,0.0264203 0.038451,0.0537144 0.054208,0.0827818 0.016578,0.0305935 0.031925,0.0618604 0.044503,0.0943393 0.013466,0.035179 0.02545,0.070922 0.034176,0.1076046 0.0092,0.039399 0.01673,0.079194 0.020115,0.1195657 0.00325,0.039498 0.00518,0.079128 0.00354,0.1187652 -0.00172,0.037692 -0.0047,0.075374 -0.011786,0.112492 -0.00734,0.037074 -0.01638,0.07385 -0.030222,0.109107 -0.013356,0.03339 -0.028501,0.066043 -0.047507,0.096651 -0.018375,0.029564 -0.038015,0.058403 -0.061232,0.084437 -0.022707,0.025003 -0.046826,0.048711 -0.073953,0.068962 -0.026536,0.019786 -0.054038,0.038285 -0.083468,0.053551 -0.030064,0.015527 -0.060807,0.029734 -0.092707,0.041119 -0.033154,0.011786 -0.066726,0.022518 -0.1011844,0.029849 -0.034644,0.00702 -0.069628,0.012355 -0.1050092,0.013687 -0.034763,0.00123 -0.069609,9.8112e-4 -0.1041752,-0.00344 -0.034521,-0.0046 -0.068823,-0.010979 -0.1019902,-0.021851 -0.031013,-0.01036 -0.061465,-0.022309 -0.090608,-0.037224 -0.027912,-0.014123 -0.055413,-0.02905 -0.082063,-0.045453 -0.027745,-0.017064 -0.055153,-0.034695 -0.081467,-0.053918 -0.026987,-0.019717 -0.053636,-0.039936 -0.078789,-0.061978 -0.025619,-0.02258 -0.050626,-0.045886 -0.073708,-0.07109 -0.023877,-0.026352 -0.046841,-0.05357 -0.066991,-0.082924 -0.020761,-0.030688 -0.040076,-0.062383 -0.055139,-0.09632 -0.01504,-0.03415 -0.028359,-0.069053 -0.037623,-0.105263 -0.00898,-0.035262 -0.016572,-0.070894 -0.020482,-0.107119 -0.00365,-0.034462 -0.006,-0.069076 -0.00497,-0.1037563 0.00107,-0.032805 0.00343,-0.065584 0.00933,-0.097923 0.00555,-0.030263 0.012301,-0.060294 0.021482,-0.089688 0.00867,-0.0284176 0.017865,-0.0566783 0.028479,-0.084438 0.010942,-0.0286163 0.022449,-0.0570301 0.035643,-0.0846956 0.01292,-0.0268245 0.026535,-0.0533322 0.042203,-0.0786775 0.014329,-0.0230357 0.029318,-0.045684 0.046204,-0.0669496 0.015128,-0.0188742 0.030907,-0.0372726 0.048879,-0.0535349 0.015202,-0.0137016 0.030927,-0.0268979 0.048464,-0.0375607 0.012928,-0.007771 0.026154,-0.0150517 0.040001,-0.0210747 0.010341,-0.004433 0.020792,-0.008668 0.03162,-0.0117803 0.0066,-0.00179 0.016792,-0.004191 0.021753,-0.004574 0.1201324,-0.0177737 0.1452683,0.15211912 0.025136,0.16989285 z' /><path class='secfill' d='m -0.61882497,-0.46597257 c 1.623e-4,2.896e-4 6.823e-4,0.001133 4.843e-4,8.688e-4 -0.00392,-0.005261 -0.00708,-0.0113134 -0.010502,-0.0168954 -0.00702,-0.0118394 -0.014622,-0.0233096 -0.022635,-0.0344984 -0.00932,-0.0128822 -0.019696,-0.0249371 -0.030186,-0.0368666 -0.010581,-0.0119612 -0.021715,-0.0234142 -0.032845,-0.0348616 -0.01006,-0.010321 -0.020184,-0.0205791 -0.030329,-0.0308157 -0.00819,-0.008268 -0.016417,-0.0165072 -0.024716,-0.0246707 -0.00695,-0.006791 -0.013874,-0.0136112 -0.020829,-0.0203989 -0.00464,-0.004395 -0.00906,-0.009048 -0.013951,-0.0131713 0.003,0.003021 0.00713,0.004892 0.010955,0.006738 -0.1127064,-0.0452201 -0.0487556,-0.20461165 0.0639513,-0.15939154 v 0 c 0.013699,0.005983 0.026775,0.0131097 0.037951,0.0231982 0.00722,0.006354 0.014209,0.0129614 0.021052,0.0197228 0.00712,0.006952 0.014214,0.0139343 0.021331,0.0208909 0.00881,0.008669 0.017542,0.0174085 0.026238,0.0261874 0.010535,0.0106298 0.021047,0.0212819 0.031492,0.0320001 0.013148,0.0135271 0.026268,0.0270929 0.038746,0.0412478 0.014304,0.016305 0.02835,0.0328662 0.040994,0.0505113 0.010277,0.014467 0.020154,0.0292075 0.029228,0.0444652 0.00429,0.007011 0.00873,0.013931 0.012946,0.0209913 0.059926,0.10562452 -0.089449,0.19037335 -0.1493756,0.0847483 z' /><path class='secfill' d='m -0.03608317,-0.57182178 c -0.00603,-0.0111541 -0.010134,-0.0231558 -0.013855,-0.0352334 -0.00548,-0.0195615 -0.00872,-0.0396516 -0.012177,-0.0596427 -0.00339,-0.0198296 -0.00696,-0.0396291 -0.010494,-0.0594337 -0.00304,-0.0170028 -0.00606,-0.0340103 -0.00899,-0.0510326 -0.00255,-0.0148969 -0.00495,-0.0298181 -0.00732,-0.0447438 -0.00206,-0.0129694 -0.0041,-0.0259435 -0.00612,-0.0389188 -0.0015,-0.009599 -0.00293,-0.019209 -0.00471,-0.0287618 -2.497e-4,-0.001391 -4.993e-4,-0.002781 -7.492e-4,-0.004172 -0.021445,-0.11953162 0.1475975,-0.14986002 0.169043,-0.0303286 v 0 c 2.048e-4,0.001146 4.102e-4,0.002292 6.157e-4,0.003436 0.00203,0.0110845 0.00378,0.0222134 0.00549,0.033352 0.002,0.0128193 0.00401,0.0256374 0.00605,0.0384507 0.00225,0.0141934 0.00454,0.0283828 0.00696,0.0425493 0.00287,0.0166742 0.00582,0.0333335 0.0088,0.0499885 0.00359,0.0201143 0.00721,0.0402233 0.010657,0.060363 0.00229,0.013246 0.00443,0.0265359 0.00747,0.0396361 3.211e-4,0.001238 8.111e-4,0.002771 0.00102,0.003966 0.05694,0.10726376 -0.094754,0.18778915 -0.1516938,0.0805254 z' /><path class='secfill' d='m 0.54965303,-0.45405452 c 0.00487,-0.009711 0.011342,-0.0184675 0.017508,-0.027369 0.010473,-0.0152709 0.020298,-0.0309723 0.030148,-0.0466484 0.013986,-0.0223279 0.027806,-0.0447595 0.041596,-0.0672093 0.011759,-0.0191728 0.023532,-0.0383366 0.035262,-0.0575269 0.00463,-0.007454 0.00886,-0.0151369 0.012492,-0.0231258 0.051848,-0.10981549 0.2071509,-0.0364909 0.1553026,0.0733246 v 0 c -0.00645,0.0134612 -0.013313,0.0267141 -0.021259,0.0393704 -0.011795,0.0192966 -0.023633,0.038567 -0.035457,0.0578459 -0.014096,0.0229488 -0.028224,0.045878 -0.042523,0.0687015 -0.011218,0.0178481 -0.022433,0.0357092 -0.034391,0.053075 -0.00165,0.002387 -0.011091,0.0167611 -0.00469,0.005604 -0.05377,0.10888777 -0.20776,0.0328462 -0.1539905,-0.0760416 z' />
</svg>
                    conlangs
                </a>
            </span><!--
            --><span>
                <a href='/videogame' class='secicon'>
<svg viewBox='-1 -1 2 2'><mask id='videogame_m'><rect x='-2' y='-2' width='4' height='4' fill='white' /><circle cx='-0.1' cy='-0.55' r='0.13' fill='black' /></mask><path stroke-width='0.2' stroke-linejoin='round' mask='url(#videogame_m)' d='M -0.2713570810121777 0 L 0.6270360384124488 0.6456204818095705 A 0.9 0.9 0 1 1 0.6270360384124488 -0.6456204818095705 z' class='secfill secstroke' />
</svg>
                    video&nbsp;games
                </a>
            </span><!--
            --><span>
                <a href='/boardgame' class='secicon'>
<svg viewBox='-1 -1 2 2'><g><path class='secstroke' fill='none' stroke-width='0.07' stroke-linecap='round' stroke-linejoin='round' d='m 0.10160887,-0.28088748 c 0.0109293,0.13880258 -0.0754125,0.30492851 -0.37596924,0.39782787 -0.22623728,0.10601457 -0.28962743,0.39782783 -0.40657133,0.41094303 -0.0156924,-0.022154 -0.13141155,-0.010379 0.005249,-0.17625267 -0.13495021,0.16388467 -0.31959061,0.0190874 -0.28503991,-0.12539699 0.0174869,-0.19235633 0.24044541,-0.36394692 0.25793235,-0.50712124 -0.0699477,-0.18689167 0.15738245,-0.34536705 0.15738245,-0.34536705 l 0.004372,-0.30602144 0.27979103,0.15738245 0.14863899,-0.17486939 0.11366518,0.24044541 c 0.8743466,-0.16612592 0.9257145,1.24813032 0.9639672,1.65688752 l -1.38802583,0.00219 c -0.0765055,-0.3169549 0.46121791,-0.5005678 0.41094296,-0.96397167 M -0.26124517,-0.77489352 -0.52792099,-0.634998' /><path class='secfill' d='m -0.54350868,-0.44572025 c 0.0266004,-0.0244088 0.049374,-0.0153341 0.0512182,0.0204093 0.001844,0.0357432 -0.0179195,0.0850009 -0.0444491,0.11078168 -0.0265297,0.0257808 -0.0500619,0.0185968 -0.0529245,-0.0161569 -0.002863,-0.0347536 0.0159979,-0.0842871 0.0424177,-0.11140187' /><path class='secfill' d='m -0.8232998,0.21003998 c 0.0266005,-0.0244088 0.049374,-0.0153341 0.0512182,0.0204093 0.001844,0.0357432 -0.0179195,0.0850009 -0.0444491,0.11078168 -0.0265297,0.0257808 -0.0500619,0.0185968 -0.0529245,-0.0161569 -0.002863,-0.0347536 0.0159979,-0.0842871 0.0424177,-0.11140187' /></g>
</svg>
                    board&nbsp;games
                </a>
            </span><!--
            --><span>
                <a href='/puzzle' class='secicon'>
<svg viewBox='-1 -1 2 2'><path class='secstroke' fill='none' stroke-width='0.07' stroke-linejoin='round' d='m 0.96398403,0.96569854 c 0,0 -6.861e-4,-0.532007 -6.861e-4,-0.5320069 0,0 -0.00592,-0.1245042 -0.1130214,-0.1037603 -0.087018,0.016855 -0.056159,0.1365343 -0.1245123,0.1418343 -0.015774,0.00122 -0.036852,-0.00371 -0.065858,-0.017322 -0.059871,-0.049915 -0.087827,-0.1434837 -0.090897,-0.2269004 -0.00113,-0.030794 0.00155,-0.059755 0.00686,-0.085066 1.361e-4,-0.00112 3.694e-4,-0.00231 5.142e-4,-0.00343 0.0093,-0.071974 0.03711,-0.14498473 0.087639,-0.18711144 0.1546984,-0.0726041 0.083271,0.10376824 0.19037,0.12451224 0.078032,0.015114 0.1021368,-0.04653 0.1095914,-0.0812931 V -0.5696096 h -0.5575609 c -0.0340332,-0.006686 -0.1001097,-0.0301248 -0.0845517,-0.11044889 0.020744,-0.10709892 0.1969448,-0.0356716 0.1243407,-0.19036998 -0.0421266,-0.0505291 -0.1151376,-0.0783424 -0.1871114,-0.0876388 -0.001124,-1.4543e-4 -0.002307,-3.7813e-4 -0.00343,-5.1424e-4 -0.0253115,-0.005305 -0.0542725,-0.007994 -0.0850662,-0.00686 -0.0834167,0.003071 -0.1769851,0.0310262 -0.2269004,0.0908974 -0.0726041,0.15469825 0.1037682,0.0832711 0.1245122,0.19036998 0.0207441,0.10709876 -0.1037602,0.11302146 -0.1037602,0.11302146 l -0.53337894,0.001544 v 0.56030437 c -0.007609,0.0348613 -0.0318462,0.0958039 -0.10941987,0.0807786 -0.10709882,-0.020744 -0.0356716,-0.19711641 -0.19036998,-0.12451227 -0.050529,0.0421267 -0.0783424,0.11530917 -0.0876388,0.18728287 -1.4489e-4,0.00112 -3.7813e-4,0.00214 -5.1424e-4,0.00326 -0.005305,0.025312 -0.007994,0.054272 -0.00686,0.085066 0.003071,0.083417 0.0310261,0.1769852 0.0908974,0.2269005 0.15469836,0.072604 0.0832711,-0.1037683 0.19036998,-0.1245123 0.10709887,-0.020744 0.11302146,0.1037602 0.11302146,0.1037602 l 5.1424e-4,0.5369806 c 0,0 0.53423644,-0.00394 0.53423644,-0.00394 0,0 0.1245043,-0.00592 0.1037602,-0.1130215 -0.0207442,-0.1071046 -0.1971165,-0.035677 -0.1245124,-0.1903757 0.049915,-0.059871 0.1434837,-0.087827 0.2269004,-0.090897 0.030794,-0.00113 0.059755,0.00155 0.085066,0.00686 0.00112,1.361e-4 0.00231,3.693e-4 0.00343,5.142e-4 0.071974,0.0093 0.1449848,0.03711 0.1871114,0.087639 0.072604,0.1546984 -0.1035967,0.083271 -0.1243407,0.19037 -0.020417,0.1054086 0.098592,0.1126426 0.1023882,0.1128499 z' />
</svg>
                    puzzles
                </a>
            </span><!--
            --><span>
                <a href='/squares' class='secicon'>
<svg viewBox='-1 -1 2 2'><g transform='scale(0.3)'><path fill='none' stroke-width='0.3' stroke-linejoin='round' d='M -1 -3 h 4 v 4 h -4 z' class='secstroke' /><path fill='none' stroke-width='0.3' stroke-linejoin='round' d='M -3 -1 h 4 v 4 h -4 z' class='secstroke' /></g>
</svg>
                    square dancing
                </a>
            </span><!--
            --><span>
                <a href='/food' class='secicon'>
<svg viewBox='-1 -1 2 2'><g transform='translate(-1 -1)'>
<path class='secstroke' fill='none' stroke-width='0.05' d='M 1.349685,1.9483641 C 1.5640089,1.8233862 1.7168631,1.6399442 1.7168631,1.3225107 H 0.28313688 c 0,0.3174335 0.15285411,0.5008755 0.36717807,0.6258534 z' />
<mask id='foodmask' mask-type='luminance'>
<rect x='-10' y='-10' width='20' height='20' fill='white' />
<path fill='black' stroke='none' d='M 1.349685,1.9483641 C 1.5640089,1.8233862 1.7168631,1.6399442 1.7168631,1.3225107 H 0.28313688 c 0,0.3174335 0.15285411,0.5008755 0.36717807,0.6258534 z' />
</mask>
<g mask='url(#foodmask)'>
<g transform='translate(0.1 0)'>
<g transform='translate(1 1) rotate(35) translate(-1 -1)'>
<path class='secstroke' fill='none' stroke-width='0.05' d="M 1.1208653,0.72935362 V 0.010478 c 0.039732,-0.06757484 0.072992,-0.06757484 0.1127241,0 v 0.71887562" />
<path class='secstroke' fill='none' stroke-width='0.05' d="m 1.1517357,0.72051045 c -0.082275,0.28428055 -0.08691,0.57058665 0,0.85928105" />
<path class='secstroke' fill='none' stroke-width='0.05' d="m 1.202719,0.72051045 c 0.082276,0.28428055 0.08691,0.57058665 0,0.85928105" />
<path class='secstroke' fill='none' stroke-width='0.05' d="m 1.2572554,0.74084048 c 0.076662,0.0942392 0.1296441,0.32102802 0.1346462,0.41038112 0.01621,0.2895446 -0.096113,0.4374929 -0.2146744,0.4374929 -0.1185614,0 -0.23088367,-0.1479483 -0.2146744,-0.4374929 0.004999,-0.089353 0.0579836,-0.31614191 0.1346462,-0.41038112 0.024602,-0.0302434 0.051223,-0.0271119 0.080028,-0.0271119 0.028804,0 0.055425,-0.003132 0.080028,0.0271119 z" />
</g>
</g>
</g>
</g>
</svg>
                    food
                </a>
            </span>
        </div>
        <div id='subheader-post'></div>

        <main>
        <div class='hsup'><h1>Penalty theory in dynasty puzzles</h1><span>2022-07-27</span></div><div class='hsub'><span class='len lenverylong'><span>very long</span> (4610 words)</span> <a class='tag' href='/blog/puzzles'><span class='tag'>puzzles</span></a><a class='tag' href='/blog/logic-puzzles'><span class='tag'>logic puzzles</span></a><a class='tag' href='/blog/math'><span class='tag'>math</span></a></div>
<p><a href="https://www.nikoli.co.jp/en/">Nikoli</a>-style pencil-and-paper logic puzzles,
like Sudoku, Yajilin, and many more,
have very simple rules.
But you can often build puzzles
that require thinking in really cool ways,
seemingly totally unrelated to what the rules literally say.</p>


<p>One example is commonly called <strong>penalty theory</strong>,
which has been written about before in e.g.
<a href="https://twitter.com/agnomy/status/1246741741777997824">this Twitter thread by agnomy</a> (Japanese),
<a href="https://chaoticiak.github.io/penaltydynasty.html">this blog post by chaotic_iak</a> (English),
or <a href="https://www.oneplusome.ga/dynasty-cycle-counting/">this blog post by redstonerodent</a> (English).
However,
the way penalty theory is usually explained
still seems to leave some people confused.</p>
<p>So here's a different description of penalty theory,
which I personally find to be the most intuitive.</p>
<div style='padding-top:5px'></div>
<p><em>Note: This post is long!
But don't worry:
lots of space is taken up by pictures,
and you only need to read about half of the post
to understand basic penalty theory.</em></p>
<h2 id="dynasty">dynasty puzzles</h2>
<p>The standard &quot;penalty theory&quot;
applies to puzzles with these rules:</p>
<ul>
<li>Shade some cells in the grid.</li>
<li>No two <em>shaded</em> cells can touch orthogonally (horizontally or vertically).</li>
<li>All of the <em>unshaded</em> cells must form a single orthogonally connected group.</li>
</ul>
<p>Puzzle types which include all of these rules
are sometimes called <strong>dynasty puzzles</strong>.</p>
<p>There are many kinds of dynasty puzzles,
but the one most conducive to penalty deductions
is <strong>Heyawake</strong>.
In Heyawake,
in addition to the rules above,
there are also &quot;rooms&quot; with numbers in them,
which are required to contain that many shaded cells.</p>
<p><em>You can click the first image to try the puzzle,
or click the second image to see the solution.</em></p>
<a href='https://puzz.link/p?heyawake/7/7/8ki94ilag7u003jsc022g3321111g' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='300' height='300' viewBox='-10 -10 300 300'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='300' height='300'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 280'/><rect fill='black' x='-2.2' y='-2.2' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='277.8' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='-2.2' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='77.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='77.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='77.8' y='37.8' width='164.4' height='4.4'/><rect fill='black' x='77.8' y='-2.2' width='4.4' height='44.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='100.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='77.8' y='37.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='157.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='197.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='100.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='197.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='197.8' y='277.8' width='84.4' height='4.4'/><rect fill='black' x='197.8' y='37.8' width='4.4' height='244.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='244.4'/><text fill='#000' font-size='28' x='220.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='-2.2' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='77.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='20.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='77.8' y='157.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='44.4'/><rect fill='black' x='197.8' y='157.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='100.0' y='180.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='-2.2' y='197.8' width='44.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='4.4' height='84.4'/><rect fill='black' x='37.8' y='197.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='20.0' y='220.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='37.8' y='197.8' width='84.4' height='4.4'/><rect fill='black' x='37.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='37.8' y='197.8' width='4.4' height='44.4'/><rect fill='black' x='117.8' y='197.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='60.0' y='220.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='117.8' y='197.8' width='84.4' height='4.4'/><rect fill='black' x='117.8' y='277.8' width='84.4' height='4.4'/><rect fill='black' x='117.8' y='197.8' width='4.4' height='84.4'/><rect fill='black' x='197.8' y='197.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='140.0' y='220.0' text-anchor='middle' dominant-baseline='central'>1</text></g></a></svg>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' class='spoiler' style='vertical-align:middle' width='300' height='300' viewBox='-10 -10 300 300'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='300' height='300'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='0' width='40' height='40'/><rect fill='#000' x='120' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='0' width='40' height='40'/><rect fill='#000' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#000' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#000' x='240' y='80' width='40' height='40'/><rect fill='#000' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#000' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#000' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#000' x='240' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#000' x='80' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#000' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#000' x='160' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#000' x='240' y='240' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 280'/><rect fill='black' x='-2.2' y='-2.2' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='277.8' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='-2.2' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='77.8' y='-2.2' width='4.4' height='84.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='77.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='77.8' y='37.8' width='164.4' height='4.4'/><rect fill='black' x='77.8' y='-2.2' width='4.4' height='44.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='100.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='77.8' y='37.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='157.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='197.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='100.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='197.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='197.8' y='277.8' width='84.4' height='4.4'/><rect fill='black' x='197.8' y='37.8' width='4.4' height='244.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='244.4'/><text fill='#000' font-size='28' x='220.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='-2.2' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='77.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='20.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='77.8' y='157.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='44.4'/><rect fill='black' x='197.8' y='157.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='100.0' y='180.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='-2.2' y='197.8' width='44.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='4.4' height='84.4'/><rect fill='black' x='37.8' y='197.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='20.0' y='220.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='37.8' y='197.8' width='84.4' height='4.4'/><rect fill='black' x='37.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='37.8' y='197.8' width='4.4' height='44.4'/><rect fill='black' x='117.8' y='197.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='60.0' y='220.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='117.8' y='197.8' width='84.4' height='4.4'/><rect fill='black' x='117.8' y='277.8' width='84.4' height='4.4'/><rect fill='black' x='117.8' y='197.8' width='4.4' height='84.4'/><rect fill='black' x='197.8' y='197.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='140.0' y='220.0' text-anchor='middle' dominant-baseline='central'>1</text></g></svg>
<p>Heyawake also has one more rule,
which we won't worry about for the purposes of this post.
(But if you want to solve other Heyawake puzzles,
<strong>make sure you learn the full rules!</strong>)</p>
<h2 id="usecase">use-case</h2>
<p>Penalty theory is about how to <strong>fit as many shaded cells as you can</strong>
into a given space.</p>
<p>You may notice that both of the dynasty rules
are <em>restrictions</em> on how the shaded cells can be placed.
So penalty theory can only apply
when there is some other constraint,
like the rooms in Heyawake,
that forces you to shade a large number of cells.</p>
<p>Here's an example.
Like all logic puzzles,
there's only one possible solution,
so you probably can't solve it by guessing.
But once you've learned penalty theory,
it will suddenly go from basically impossible to fairly easy!</p>
<a href='https://puzz.link/p?heyawake/10/10/04080g000000001428000003000000003g00-1d03' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='420' viewBox='-10 -10 420 420'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='420'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 360 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='397.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='404.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='404.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='397.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='404.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='404.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>29</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='117.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>0</text><rect fill='black' x='117.8' y='317.8' width='124.4' height='4.4'/><rect fill='black' x='117.8' y='397.8' width='124.4' height='4.4'/><rect fill='black' x='117.8' y='317.8' width='4.4' height='84.4'/><rect fill='black' x='237.8' y='317.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='140.0' y='340.0' text-anchor='middle' dominant-baseline='central'>3</text></g></a></svg>
<p>(This puzzle was created by <a href="https://twitter.com/agnomy/status/1253652799910371328">@agnomy on Twitter</a>.)</p>
<h2 id="counting">counting pools</h2>
<p>To talk about penalty theory,
I'm going to introduce the concept of a <strong>pool</strong>.</p>
<p>Consider all of the <strong>gridpoints</strong> in the grid.
These are all the places the grid lines intersect.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='180' viewBox='-10 -10 220 180'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='180'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='164.4'/></g><g fill='#444' transform='translate(40 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>1</text></g><g fill='#444' transform='translate(80 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#444' transform='translate(120 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>3</text></g><g fill='#444' transform='translate(160 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>4</text></g><g fill='#444' transform='translate(40 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>5</text></g><g fill='#444' transform='translate(80 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>6</text></g><g fill='#444' transform='translate(120 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>7</text></g><g fill='#444' transform='translate(160 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>8</text></g><g fill='#444' transform='translate(40 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>9</text></g><g fill='#444' transform='translate(80 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>10</text></g><g fill='#444' transform='translate(120 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>11</text></g><g fill='#444' transform='translate(160 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>12</text></g></svg>
<p>You can think of shaded cells
as connecting all the gridpoints they touch together.
In the example below,
the starred gridpoints are connected.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='260' height='220' viewBox='-10 -10 260 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='260' height='220'/><rect fill='#000' x='80' y='40' width='40' height='40'/><rect fill='#000' x='40' y='80' width='40' height='40'/><rect fill='#000' x='120' y='80' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 240'/><rect fill='black' x='-2.2' y='-2.2' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='204.4'/></g><g fill='#f00' transform='translate(80 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>Also,
some shaded cells connect gridpoints to the edge of the grid,
like the triangular gridpoints in the example below.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='260' height='220' viewBox='-10 -10 260 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='260' height='220'/><rect fill='#000' x='120' y='40' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 240'/><rect fill='black' x='-2.2' y='-2.2' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='204.4'/></g><g fill='#80f' transform='translate(120 40) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(160 40) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(120 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(160 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(200 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(160 120) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(200 120) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(200 160) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>A &quot;pool&quot; is just a group of connected gridpoints
which does not connect to the edge.
In the example below,
there are 8 pools,
all marked with their own shape.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='300' height='260' viewBox='-10 -10 300 260'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='300' height='260'/><rect fill='#000' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#000' x='40' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#000' x='120' y='160' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 280'/><rect fill='black' x='-2.2' y='-2.2' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='237.8' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='277.8' y='-2.2' width='4.4' height='244.4'/></g><g fill='#888' transform='translate(160 40) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(200 40) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(240 40) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0f0' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(160 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(200 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(240 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(40 120) scale(12)'><polygon points='0.0,-1.0 0.9510565162951535,-0.30901699437494745 0.5877852522924732,0.8090169943749473 -0.587785252292473,0.8090169943749476 -0.9510565162951536,-0.30901699437494723'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(80 120) scale(12)'><polygon points='0.0,-1.0 0.9510565162951535,-0.30901699437494745 0.5877852522924732,0.8090169943749473 -0.587785252292473,0.8090169943749476 -0.9510565162951536,-0.30901699437494723'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f0f' transform='translate(120 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(160 120) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(200 120) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(240 120) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(40 160) scale(12)'><polygon points='0.0,-1.0 0.9510565162951535,-0.30901699437494745 0.5877852522924732,0.8090169943749473 -0.587785252292473,0.8090169943749476 -0.9510565162951536,-0.30901699437494723'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(80 160) scale(12)'><polygon points='0.0,-1.0 0.9510565162951535,-0.30901699437494745 0.5877852522924732,0.8090169943749473 -0.587785252292473,0.8090169943749476 -0.9510565162951536,-0.30901699437494723'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(120 160) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(160 160) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(200 160) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#a60' transform='translate(240 160) scale(12)'><polygon points='0.0,-1.0 0.8660254037844386,-0.5000000000000001 0.8660254037844387,0.4999999999999998 1.2246467991473532e-16,1.0 -0.8660254037844384,0.5000000000000004 -0.8660254037844386,-0.5000000000000001'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#aa0' transform='translate(40 200) scale(12)'><polygon points='0.0,-0.5 0.7071067811865475,-0.7071067811865476 0.5,-3.061616997868383e-17 0.7071067811865476,0.7071067811865475 6.123233995736766e-17,0.5 -0.7071067811865475,0.7071067811865477 -0.5,9.184850993605148e-17 -0.7071067811865477,-0.7071067811865474'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 200) scale(12)'><rect x='-0.2' y='-0.8' width='0.4' height='1.6'/><rect x='-0.8' y='-0.2' width='1.6' height='0.4'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(120 200) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(160 200) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>To continue the metaphor,
you could think of the edge of the grid
and everything connected to it
as &quot;the <b>ocean</b>&quot;.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='300' height='260' viewBox='-10 -10 300 260'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='300' height='260'/><rect fill='#000' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#000' x='40' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#000' x='120' y='160' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 280'/><rect fill='black' x='-2.2' y='-2.2' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='237.8' width='284.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='277.8' y='-2.2' width='4.4' height='244.4'/></g><g fill='#0cf' transform='translate(0 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>It's easy to count the number of pools
when there are no shaded cells:
just multiply (<span class='var'>width</span>−1) by (<span class='var'>height</span>−1).
For example,
this puzzle is 8 cells wide and 4 cells tall,
so it starts with 7 × 3 = 21 pools.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='340' height='180' viewBox='-10 -10 340 180'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='340' height='180'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 320'/><rect fill='black' x='-2.2' y='-2.2' width='324.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='324.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='164.4'/></g><g fill='#444' transform='translate(40 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>1</text></g><g fill='#444' transform='translate(80 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#444' transform='translate(120 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>3</text></g><g fill='#444' transform='translate(160 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>4</text></g><g fill='#444' transform='translate(200 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>5</text></g><g fill='#444' transform='translate(240 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>6</text></g><g fill='#444' transform='translate(280 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>7</text></g><g fill='#444' transform='translate(40 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#444' transform='translate(40 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>3</text></g></svg>
<h2 id="consuming">consuming pools</h2>
<p>The reason we care about these pools
is that shading a cell
changes the number of pools
in a completely predictable way.</p>
<p>In particular,
when you shade a cell,
the pools corresponding to its four corners
are combined to become a single pool.
Some of them might be the ocean,
like if you shade a corner:</p>
<!-- Suppose you don't know anything about the current state of the grid -->
<!-- except for the number of pools. -->
<!-- How does the number of pools change -->
<!-- when you shade a cell in the corner? -->
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='140' height='140' viewBox='-10 -10 140 140'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='140' height='140'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 120'/><rect fill='black' x='-2.2' y='117.8' width='124.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='124.4'/></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
→
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='140' height='140' viewBox='-10 -10 140 140'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='140' height='140'/><rect fill='#000' x='0' y='80' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 120'/><rect fill='black' x='-2.2' y='117.8' width='124.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='124.4'/></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
</p>
<p>Or an edge:</p>
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='140' height='140' viewBox='-10 -10 140 140'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='140' height='140'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 120'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='124.4'/></g><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
→
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='140' height='140' viewBox='-10 -10 140 140'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='140' height='140'/><rect fill='#000' x='0' y='40' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 120'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='124.4'/></g><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
</p>
<p>Or they might all be different:</p>
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='140' height='140' viewBox='-10 -10 140 140'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='140' height='140'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 120'/></g><g fill='#f00' transform='translate(40 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(80 40) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0f0' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f0f' transform='translate(80 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
→
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='140' height='140' viewBox='-10 -10 140 140'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='140' height='140'/><rect fill='#000' x='40' y='40' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 120'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 120'/></g><g fill='#f00' transform='translate(40 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
</p>
<p>In the corner example,
whichever pool the starred gridpoint belongs to
becomes part of the ocean.
So the number of pools decreases by 1.</p>
<p>In the edge example,
both the star and triangle pools
become connected to the ocean.
So the number of pools decreases by 2.</p>
<p>In the interior example,
the four pools on each of the four corners
are all joined into a single pool.
So the number of pools decreases by 3.</p>
<p>You might be suspicious
that I'm assuming different symbols belong to different pools –
and rightfully so!
But remember that the dynasty rules say
that the unshaded cells must form a single connected group.
If any of the different symbols drawn were actually the same,
then you could draw a line of shaded cells through whatever connected them.
This would &quot;rope off&quot; an area of unshaded cells,
disconnecting it from the rest of the puzzle.</p>
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><rect fill='#a0ffa0' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#000' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='80' width='40' height='40'/><rect fill='#000' x='40' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='80' width='40' height='40'/><rect fill='#000' x='120' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/></g><path fill='none' stroke='red' stroke-dasharray='4' stroke-width='2' d='M 80 120 Q 60.0 100.0 80 80 Q 100.0 60.0 120 80 Q 140.0 100.0 120 120'/><g fill='#f00' transform='translate(80 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0f0' transform='translate(80 160) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f0f' transform='translate(120 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
→
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><rect fill='#a0ffa0' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#000' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='80' width='40' height='40'/><rect fill='#000' x='40' y='80' width='40' height='40'/><rect fill='#ffa0a0' x='80' y='80' width='40' height='40'/><rect fill='#000' x='120' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#888' x='80' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/></g><g fill='#f00' transform='translate(80 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 40) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(80 160) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(120 160) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
</p>
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='180' height='260' viewBox='-10 -10 180 260'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='180' height='260'/><rect fill='#a0ffa0' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='80' width='40' height='40'/><rect fill='#000' x='40' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#000' x='80' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#000' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='200' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 160'/><rect fill='black' x='-2.2' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/></g><path fill='none' stroke='red' stroke-dasharray='4' stroke-width='2' d='M 0 80 Q 20.0 60.0 40 80 L 80 120 Q 100.0 140.0 80 160 Q 60.0 180.0 80 200'/><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(120 200) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
→
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='180' height='260' viewBox='-10 -10 180 260'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='180' height='260'/><rect fill='#a0ffa0' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#ffa0a0' x='0' y='80' width='40' height='40'/><rect fill='#000' x='40' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#ffa0a0' x='0' y='120' width='40' height='40'/><rect fill='#ffa0a0' x='40' y='120' width='40' height='40'/><rect fill='#000' x='80' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='120' width='40' height='40'/><rect fill='#ffa0a0' x='0' y='160' width='40' height='40'/><rect fill='#000' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#ffa0a0' x='0' y='200' width='40' height='40'/><rect fill='#ffa0a0' x='40' y='200' width='40' height='40'/><rect fill='#888' x='80' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='200' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 160'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 160'/><rect fill='black' x='-2.2' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/></g><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
</p>
<!-- If you shaded the gray cell, -->
<!-- then whichever pool the starred gridpoint belongs to -->
<!-- would become connected to the ocean. -->
<!-- That means it's no longer a pool. -->
<!-- So placing a corner cell -->
<!-- always just decreases the number of pools by 1. -->
<!-- You might worry: -->
<!-- what if the starred gridpoint was *already* connected -->
<!-- to the ocean? -->
<!-- In that case, -->
<!-- shading the corner cell would break the rule -->
<!-- about unshaded cells being connected, -->
<!-- so we're not allowed to shade it. -->
<!-- .heya {{ -->
<!--     6x4 !T !R -->
<!--     ?????? -->
<!--     ??#??? -->
<!--     ?#?#?? -->
<!--     ~???#? -->
<!-- }} -->
<p>To summarize,</p>
<ul>
<li><strong>Corner cells</strong> decrease the number of pools by 1.</li>
<li><strong>Edge cells</strong> decrease the number of pools by 2.</li>
<li><strong>Interior cells</strong> decrease the number of pools by 3.</li>
</ul>
<p>But there's another way of thinking about this,
which I personally like more.</p>
<ul>
<li>Placing a shaded cell <strong>costs</strong> 3 pools.</li>
<li>Every edge of a shaded cell
touching the border of the puzzle
gives a <strong>discount</strong> of 1 pool.</li>
</ul>
<p>(There's actually a good reason this works:
every edge of a shaded cell touching the border of the puzzle
corresponds to allowing two of the pools it joins to be the same.)</p>
<p>I'll give explanations with both styles of counting;
you can use whichever one you like better.</p>
<h2 id="solving">but how do I actually solve a puzzle?</h2>
<p>From all that, we get a nice formula:</p>
<blockquote>
<p><span class='var'>remaining pools</span> = (<span class='var'>width</span>−1)×(<span class='var'>height</span>−1) − (<span class='var'># corners</span>) − 2×(<span class='var'># edges</span>) − 3×(<span class='var'># interior</span>)</p>
</blockquote>
<p>or, with the other counting method,</p>
<blockquote>
<p><span class='var'>remaining pools</span> = (<span class='var'>width</span>−1)×(<span class='var'>height</span>−1) − 3×(<span class='var'># shaded</span>)<br />
  + <span class='var'># shaded on top edge</span><br />
  + <span class='var'># shaded on bottom edge</span><br />
  + <span class='var'># shaded on left edge</span><br />
  + <span class='var'># shaded on right edge</span></p>
</blockquote>
<p>At first,
this might not seem very useful for solving puzzles,
because you don't know how many corner and edge cells you're going to end up shading.
But remember that penalty theory applies to puzzles
where you're trying to shade <em>as many cells as possible</em>.</p>
<p>You have a limited supply of pools.
So since corners and edges consume fewer pools,
you had better shade as many of them as possible
to avoid running out of pools.</p>
<p>This is confusing without an example.
I'll demonstrate the technique on this puzzle (created by me).</p>
<a href='https://puzz.link/p?heyawake/10/8/04081024480k98g000700o0071s00-132222' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g></a></svg>
<p>(Click the image to open the puzzle in a new tab
if you want to try it yourself
or follow along.)</p>
<p>How do I start?
Well,
here are all the facts I know:</p>
<ul>
<li>
<p>There are 9 × 7 = <strong>63 pools</strong> to start with.</p>
</li>
<li>
<p>I have to place 19 + 2 + 2 + 2 + 2 = <strong>27 shaded cells</strong>.</p>
</li>
<li>
<p>Using the first counting method:</p>
<ul>
<li>
<p>If I'm trying to spend as few pools as possible,
I should shade as many corners as possible,
since they're the cheapest.
There are <strong>4</strong> of those.</p>
</li>
<li>
<p>If all the corners are shaded,
I can only fit <strong>10</strong> more shaded cells on the edges:
three on the top, three on the bottom, two on the left, and two on the right.
(Remember, shaded cells can't touch.)</p>
</li>
<li>
<p>If I shade as many corners and edges as possible,
the remaining 27 − 4 − 10 = <strong>13</strong> shaded cells
must be interior.</p>
</li>
<li>
<p>Shading 4 corners, 10 edges, and 13 interior cells
costs 4 + 2×10 + 3×13 = <strong>63 pools</strong>.</p>
</li>
</ul>
</li>
<li>
<p>Alternatively, using the second counting method:</p>
<ul>
<li>
<p>Shading 27 cells costs 3×27 = <strong>81</strong> pools without any discounts.</p>
</li>
<li>
<p>The biggest discount I can get is 5 from the top edge,
5 from the bottom edge,
4 from the left edge,
and 4 from the right edge.</p>
</li>
<li>
<p>Therefore,
shading 27 cells on this grid
costs at least 81 − 5 − 5 − 4 − 4 = <strong>63 pools</strong>.</p>
</li>
</ul>
</li>
</ul>
<p>So there are 63 pools available,
and shading 27 cells on this grid
costs at least 63 pools!
That means I <em>must</em> shade as many corners and edges as possible,
<em>and there will be no pools left over</em>
(in other words,
every gridpoint will be part of the ocean).</p>
<p>Great!
Concretely,
I can now start by shading all the corners.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g></svg>
<p>I need to shade 2 cells in the top right room,
and then some more cells will be unshaded
because of the dynasty rules.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g></svg>
<p>Now there's only one way to fit enough shaded cells
on the top and right edges.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#000' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='120' width='40' height='40'/><rect fill='#000' x='360' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#000' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#f00' transform='translate(320 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(320 160) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>Both the star and the triangle have to connect to the ocean somehow.
But I can only shade one more cell in the 2 room.
So it has to be the middle one,
so that both the star and the triangle can escape.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#000' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='280' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='120' width='40' height='40'/><rect fill='#000' x='360' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#000' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#f80' transform='translate(280 80) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f0f' transform='translate(320 200) scale(12)'><polygon points='0.0,-1.0 0.9510565162951535,-0.30901699437494745 0.5877852522924732,0.8090169943749473 -0.587785252292473,0.8090169943749476 -0.9510565162951536,-0.30901699437494723'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>Now there are some nearly-trapped pools,
marked above,
which only have one way to escape.
Also,
shading the corresponding cell
will create another nearly-trapped pool next to it,
resulting in a chain of similar deductions.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#000' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#000' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='280' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='120' width='40' height='40'/><rect fill='#000' x='360' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#000' x='280' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#000' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='280' width='40' height='40'/><rect fill='#000' x='280' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g></svg>
<p>The remaining 2 rooms both already have one shaded cell in them,
and to fit enough shaded cells on the edges,
one of them has to go in each of the 2 rooms.
So I can mark all the non-edge cells in the 2 rooms
as unshaded.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#000' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#000' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='280' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='120' width='40' height='40'/><rect fill='#000' x='360' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#000' x='280' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#000' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='280' width='40' height='40'/><rect fill='#000' x='280' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#f80' transform='translate(280 200) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(320 200) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(40 240) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f0f' transform='translate(240 240) scale(12)'><polygon points='0.0,-1.0 0.9510565162951535,-0.30901699437494745 0.5877852522924732,0.8090169943749473 -0.587785252292473,0.8090169943749476 -0.9510565162951536,-0.30901699437494723'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(280 240) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(320 240) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#80f' transform='translate(240 280) scale(12)'><polygon points='0.0,-1.0 0.8660254037844387,0.4999999999999998 -0.8660254037844384,0.5000000000000004'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>Again,
there are a bunch of marked pools that only have one escape route,
and again they will lead to more of the same:</p>
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#000' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#000' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#000' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='280' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='120' width='40' height='40'/><rect fill='#000' x='360' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#000' x='240' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='160' width='40' height='40'/><rect fill='#000' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#000' x='280' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#000' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='280' width='40' height='40'/><rect fill='#000' x='200' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='280' width='40' height='40'/><rect fill='#000' x='280' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#f00' transform='translate(160 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(200 80) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(240 80) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(280 80) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(160 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f00' transform='translate(200 120) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(240 120) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(280 120) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(320 120) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(240 160) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(280 160) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(320 160) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(200 200) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(240 200) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(280 200) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(320 200) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(200 240) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(240 240) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(280 240) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#f80' transform='translate(320 240) scale(12)'><polygon points='0.0,-1.0 1.0,-6.123233995736766e-17 1.2246467991473532e-16,1.0 -1.0,1.8369701987210297e-16'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
</p>
<p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='340' viewBox='-10 -10 420 340'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='340'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#000' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#000' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#000' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#000' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='280' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='120' width='40' height='40'/><rect fill='#000' x='360' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#000' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#000' x='240' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='160' width='40' height='40'/><rect fill='#000' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#000' x='80' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#000' x='280' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#000' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#000' x='120' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#000' x='80' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='280' width='40' height='40'/><rect fill='#000' x='200' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='280' width='40' height='40'/><rect fill='#000' x='280' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#000' x='360' y='280' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='324.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='324.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>19</text><rect fill='black' x='317.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='77.8' width='84.4' height='4.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='84.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='340.0' y='20.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='277.8' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='197.8' width='124.4' height='4.4'/><rect fill='black' x='277.8' y='77.8' width='4.4' height='124.4'/><rect fill='black' x='397.8' y='77.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='-2.2' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='84.4' height='4.4'/><rect fill='black' x='-2.2' y='157.8' width='4.4' height='164.4'/><rect fill='black' x='77.8' y='157.8' width='4.4' height='164.4'/><text fill='#000' font-size='28' x='20.0' y='180.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='157.8' y='237.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='157.8' y='237.8' width='4.4' height='84.4'/><rect fill='black' x='317.8' y='237.8' width='4.4' height='84.4'/><text fill='#000' font-size='28' x='180.0' y='260.0' text-anchor='middle' dominant-baseline='central'>2</text></g></svg>
</p>
<p>Solved!</p>
<h2 id="deeper">optional: deeper down the rabbit pool</h2>
<p>So that's how to apply penalty theory to the whole puzzle.
But what if you only want to use it on a certain part?</p>
<a href='https://puzz.link/p?heyawake/10/9/0g1k386h020k280g00600001v006080u0eg3ag1' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g></a></svg>
<p>This puzzle has a big number in it,
but if you try to apply penalty theory to the whole thing,
you'll find that there's a lot of wiggle room.
Is it possible to use penalty theory on just the big number?</p>
<p>It turns out it is!
Consider just the 14 room,
and pretend the rest of the puzzle doesn't exist.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g><g fill='#0cf' transform='translate(0 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 0) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>1</text></g><g fill='#444' transform='translate(80 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#444' transform='translate(120 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>3</text></g><g fill='#444' transform='translate(160 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>4</text></g><g fill='#444' transform='translate(200 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>5</text></g><g fill='#444' transform='translate(240 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>6</text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>7</text></g><g fill='#444' transform='translate(80 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>8</text></g><g fill='#444' transform='translate(120 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>9</text></g><g fill='#444' transform='translate(160 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>10</text></g><g fill='#444' transform='translate(200 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>11</text></g><g fill='#444' transform='translate(240 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>12</text></g><g fill='#0cf' transform='translate(0 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>13</text></g><g fill='#444' transform='translate(80 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>14</text></g><g fill='#444' transform='translate(120 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>15</text></g><g fill='#444' transform='translate(160 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>16</text></g><g fill='#444' transform='translate(200 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(240 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>18</text></g><g fill='#0cf' transform='translate(0 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>19</text></g><g fill='#444' transform='translate(80 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>20</text></g><g fill='#444' transform='translate(120 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>21</text></g><g fill='#444' transform='translate(160 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>22</text></g><g fill='#444' transform='translate(200 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>23</text></g><g fill='#444' transform='translate(240 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>24</text></g><g fill='#0cf' transform='translate(0 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>25</text></g><g fill='#444' transform='translate(80 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>26</text></g><g fill='#444' transform='translate(120 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>27</text></g><g fill='#444' transform='translate(160 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>28</text></g><g fill='#0cf' transform='translate(0 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>29</text></g><g fill='#444' transform='translate(80 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>30</text></g><g fill='#444' transform='translate(120 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>31</text></g><g fill='#444' transform='translate(160 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>32</text></g><g fill='#0cf' transform='translate(0 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>33</text></g><g fill='#444' transform='translate(80 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>34</text></g><g fill='#0cf' transform='translate(0 320) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>35</text></g></svg>
<p>Let's count:</p>
<ul>
<li>
<p>There are <strong>35 pools</strong>.</p>
</li>
<li>
<p>I have to place <strong>14 shaded cells</strong>.</p>
</li>
<li>
<p>The best I can do is 1 corner, 5 edges, and 8 interior.
This consumes 1 + 2×5 + 3×8 = <strong>35 pools</strong>.</p>
</li>
<li>
<p>Alternatively,
the base cost is 3×14 = 42 pools,
and the best discount is 3 pools from the top edge
and 4 pools from the left edge.
This consumes at least 42 − 3 − 4 = <strong>35 pools</strong>.</p>
</li>
</ul>
<p>Nice!
Again,
I need as many corners and edges as possible,
and all pools must connect to the ocean.</p>
<p>Some pools
(namely 24, 32, 34, and 35)
are already almost trapped,
so I'll start by placing the shaded cells that let them escape.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='200' width='40' height='40'/><rect fill='#000' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#000' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='320' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g><g fill='#444' transform='translate(240 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>12</text></g><g fill='#444' transform='translate(200 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(240 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(160 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>22</text></g><g fill='#444' transform='translate(200 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(240 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(120 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>27</text></g><g fill='#444' transform='translate(160 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>27</text></g><g fill='#444' transform='translate(120 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>27</text></g><g fill='#444' transform='translate(160 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>27</text></g></svg>
<p>Now some more pools
(marked on the grid)
are almost trapped,
and I can also fill in the left edge.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#000' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='200' width='40' height='40'/><rect fill='#000' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#000' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='320' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g></svg>
<p>The rest is straightforward.</p>
<p>Now it's time to look at the 10.
Notice that some of its gridpoints are already part of the ocean.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#000' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#000' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='200' width='40' height='40'/><rect fill='#000' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#000' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='320' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g><g fill='#0cf' transform='translate(160 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(280 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>1</text></g><g fill='#444' transform='translate(320 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#444' transform='translate(360 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>3</text></g><g fill='#0cf' transform='translate(400 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(200 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>4</text></g><g fill='#444' transform='translate(240 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>5</text></g><g fill='#444' transform='translate(280 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>6</text></g><g fill='#444' transform='translate(320 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>7</text></g><g fill='#444' transform='translate(360 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>8</text></g><g fill='#0cf' transform='translate(400 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(200 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>9</text></g><g fill='#444' transform='translate(240 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>10</text></g><g fill='#444' transform='translate(280 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>11</text></g><g fill='#444' transform='translate(320 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>12</text></g><g fill='#444' transform='translate(360 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>13</text></g><g fill='#0cf' transform='translate(400 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(160 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>14</text></g><g fill='#444' transform='translate(200 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>15</text></g><g fill='#444' transform='translate(240 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>16</text></g><g fill='#444' transform='translate(280 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(320 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>18</text></g><g fill='#444' transform='translate(360 280) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>19</text></g><g fill='#0cf' transform='translate(400 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(160 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>20</text></g><g fill='#444' transform='translate(200 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>21</text></g><g fill='#444' transform='translate(240 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>22</text></g><g fill='#444' transform='translate(280 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>23</text></g><g fill='#444' transform='translate(320 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>24</text></g><g fill='#444' transform='translate(360 320) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>25</text></g><g fill='#0cf' transform='translate(400 320) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(280 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(320 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(360 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(400 360) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>Counting again:</p>
<ul>
<li>
<p>There are <strong>25 pools</strong>.</p>
</li>
<li>
<p>I have to place <strong>10 shaded cells</strong>.</p>
</li>
<li>
<p>The best I can do is 1 corner, 4 edges, and 5 interior.
This consumes 1 + 2×4 + 3×5 = <strong>24 pools</strong>.</p>
</li>
<li>
<p>Alternatively,
the base cost is 3×10 = 30 pools,
and the best discount is 3 pools from the bottom edge
and 3 pools from the right edge.
This consumes at least 30 − 3 − 3 = <strong>24 pools</strong>.</p>
</li>
</ul>
<p>Hmm,
there's one extra pool left over.
That could mean one of two things:
either I won't be able to shade as many corners and edges as I thought,
or there'll be a pool that doesn't connect to the ocean.</p>
<p>In this case,
the answer is a little tricky.
Because of the 3 room,
there will be another shaded cell
touching the top of the 10 room.
This shaded cell will touch either pools 1 and 2 or pools 2 and 3.</p>
<p>Hypothetically,
let's say it touches 2 and 3.
Then,
pools 2 and 3 will be connected <em>from the outside</em>.
But remember,
I'm only looking at this subregion of the puzzle,
and I'm pretending the rest of the puzzle doesn't exist.
So from the perspective of the penalty computation,
2 and 3 aren't actually connected yet,
and connecting them from inside the subregion would be illegal!
(That would create a closed-off area of unshaded cells,
for the same reason as described in the <a href="#counting">counting pools</a> section.)</p>
<p>Therefore,
pools 2 and 3 will remain separate pools within this region.
And since I know there's only room for one pool left over,
that means everything else has to connect to either 2 or 3,
one of which will end up connecting to the ocean.</p>
<p>Now all the pools are accounted for,
so I know that all pools must connect to the ocean <em>or the remaining pool</em>,
and corners and edges are maximal.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='120' width='40' height='40'/><rect fill='#000' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#000' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#000' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='200' width='40' height='40'/><rect fill='#000' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#000' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#000' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='320' width='40' height='40'/><rect fill='#000' x='360' y='320' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g><g fill='#888' transform='translate(320 200) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#888' transform='translate(160 280) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#888' transform='translate(240 280) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#888' transform='translate(320 280) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#888' transform='translate(200 360) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#888' transform='translate(280 360) scale(12)'><polygon points='0.0,-1.0 0.29389262614623657,-0.4045084971874737 0.9510565162951535,-0.30901699437494745 0.4755282581475768,0.15450849718747367 0.5877852522924732,0.8090169943749473 6.123233995736766e-17,0.5 -0.587785252292473,0.8090169943749476 -0.47552825814757677,0.15450849718747378 -0.9510565162951536,-0.30901699437494723 -0.2938926261462367,-0.40450849718747367'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<!-- At this point, -->
<!-- unfortunately I can't find an elegant argument for the next step, -->
<!-- but it's not too hard to show -->
<!-- that the sixth cell in the last row can't be shaded by trial and error. -->
<!-- Therefore the fifth one must be shaded -->
<!-- (to fit enough edges). -->
<p>The next step is a bit tricky,
and you might find it easiest to just proceed by trial and error.
But here's one reasonable argument:
all of the starred gridpoints have to touch a shaded cell within the 10 room
(either to fit enough edges or to let pools escape),
which accounts for all 6 remaining shaded cells in the 10 room.
So the 7th cell in the 5th row must be unshaded.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='120' width='40' height='40'/><rect fill='#000' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#000' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='160' width='40' height='40'/><rect fill='#888' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#000' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='200' width='40' height='40'/><rect fill='#000' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#000' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#000' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='320' width='40' height='40'/><rect fill='#000' x='360' y='320' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g></svg>
<p>Now the cell marked in gray must be shaded
to avoid trapping too many pools,
and you should be able to solve the puzzle from there!</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='420' height='380' viewBox='-10 -10 420 380'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='420' height='380'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#000' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#000' x='200' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='40' width='40' height='40'/><rect fill='#000' x='320' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#000' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='80' width='40' height='40'/><rect fill='#000' x='280' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='120' width='40' height='40'/><rect fill='#000' x='320' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='120' width='40' height='40'/><rect fill='#000' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#000' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='160' width='40' height='40'/><rect fill='#000' x='280' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='160' width='40' height='40'/><rect fill='#000' x='360' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='200' width='40' height='40'/><rect fill='#000' x='120' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='200' width='40' height='40'/><rect fill='#000' x='200' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='240' width='40' height='40'/><rect fill='#000' x='40' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='240' width='40' height='40'/><rect fill='#000' x='160' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='240' width='40' height='40'/><rect fill='#000' x='280' y='240' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='240' width='40' height='40'/><rect fill='#000' x='360' y='240' width='40' height='40'/><rect fill='#000' x='0' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='280' width='40' height='40'/><rect fill='#000' x='240' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='280' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='360' y='280' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='320' width='40' height='40'/><rect fill='#000' x='80' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='320' width='40' height='40'/><rect fill='#000' x='160' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='240' y='320' width='40' height='40'/><rect fill='#000' x='280' y='320' width='40' height='40'/><rect fill='#a0ffa0' x='320' y='320' width='40' height='40'/><rect fill='#000' x='360' y='320' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 320 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 360 0 V 360'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 280 H 400'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 320 H 400'/><rect fill='black' x='-2.2' y='-2.2' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='404.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='364.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='4.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>14</text><rect fill='black' x='237.8' y='-2.2' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='164.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='397.8' y='-2.2' width='4.4' height='164.4'/><rect fill='black' x='277.8' y='37.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='157.8' width='84.4' height='4.4'/><rect fill='black' x='277.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='357.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='300.0' y='60.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='157.8' y='157.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='357.8' width='244.4' height='4.4'/><rect fill='black' x='157.8' y='157.8' width='4.4' height='204.4'/><rect fill='black' x='397.8' y='157.8' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='180.0' y='180.0' text-anchor='middle' dominant-baseline='central'>10</text><rect fill='black' x='-2.2' y='317.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='357.8' width='164.4' height='4.4'/><rect fill='black' x='-2.2' y='317.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='317.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='340.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='77.8' y='237.8' width='84.4' height='4.4'/><rect fill='black' x='77.8' y='237.8' width='4.4' height='44.4'/><rect fill='black' x='37.8' y='277.8' width='44.4' height='4.4'/><rect fill='black' x='37.8' y='277.8' width='4.4' height='44.4'/></g></svg>
<p>As promised,
the original pool 2 does not connect to the ocean
through the 10 region,
showing where the inefficiency of 1 pool comes from.</p>
<!--
<a href='https://puzz.link/p?heyawake/8/7/cg413830g4vg0104g200g1g3c11' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='340' height='300' viewBox='-10 -10 340 300'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='340' height='300'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 320'/><rect fill='black' x='-2.2' y='-2.2' width='324.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='324.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='77.8' y='-2.2' width='44.4' height='4.4'/><rect fill='black' x='77.8' y='37.8' width='44.4' height='4.4'/><rect fill='black' x='77.8' y='-2.2' width='4.4' height='44.4'/><rect fill='black' x='117.8' y='-2.2' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='100.0' y='20.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='117.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='157.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='117.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='117.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='140.0' y='140.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='237.8' y='157.8' width='44.4' height='4.4'/><rect fill='black' x='237.8' y='197.8' width='44.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='4.4' height='44.4'/><rect fill='black' x='277.8' y='157.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='260.0' y='180.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='237.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='237.8' y='277.8' width='84.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='284.4'/><text fill='#000' font-size='28' x='260.0' y='20.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='-2.2' y='37.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='37.8' width='4.4' height='244.4'/><rect fill='black' x='237.8' y='37.8' width='4.4' height='244.4'/><text fill='#000' font-size='28' x='20.0' y='60.0' text-anchor='middle' dominant-baseline='central'>12</text></g></a></svg>
<p>x</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='340' height='300' viewBox='-10 -10 340 300'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='340' height='300'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 240 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 280 0 V 280'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 320'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 240 H 320'/><rect fill='black' x='-2.2' y='-2.2' width='324.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='324.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='77.8' y='-2.2' width='44.4' height='4.4'/><rect fill='black' x='77.8' y='37.8' width='44.4' height='4.4'/><rect fill='black' x='77.8' y='-2.2' width='4.4' height='44.4'/><rect fill='black' x='117.8' y='-2.2' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='100.0' y='20.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='117.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='157.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='117.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='117.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='140.0' y='140.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='237.8' y='157.8' width='44.4' height='4.4'/><rect fill='black' x='237.8' y='197.8' width='44.4' height='4.4'/><rect fill='black' x='237.8' y='157.8' width='4.4' height='44.4'/><rect fill='black' x='277.8' y='157.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='260.0' y='180.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='237.8' y='-2.2' width='84.4' height='4.4'/><rect fill='black' x='237.8' y='277.8' width='84.4' height='4.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='284.4'/><rect fill='black' x='317.8' y='-2.2' width='4.4' height='284.4'/><text fill='#000' font-size='28' x='260.0' y='20.0' text-anchor='middle' dominant-baseline='central'>3</text><rect fill='black' x='-2.2' y='37.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='277.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='37.8' width='4.4' height='244.4'/><rect fill='black' x='237.8' y='37.8' width='4.4' height='244.4'/><text fill='#000' font-size='28' x='20.0' y='60.0' text-anchor='middle' dominant-baseline='central'>12</text></g><g fill='#0cf' transform='translate(0 40) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>1</text></g><g fill='#444' transform='translate(80 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>2</text></g><g fill='#444' transform='translate(120 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>3</text></g><g fill='#444' transform='translate(160 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>4</text></g><g fill='#444' transform='translate(200 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>5</text></g><g fill='#444' transform='translate(240 40) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>6</text></g><g fill='#0cf' transform='translate(0 80) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>7</text></g><g fill='#444' transform='translate(80 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>8</text></g><g fill='#444' transform='translate(120 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>9</text></g><g fill='#444' transform='translate(160 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>10</text></g><g fill='#444' transform='translate(200 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>11</text></g><g fill='#444' transform='translate(240 80) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>12</text></g><g fill='#0cf' transform='translate(0 120) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>13</text></g><g fill='#444' transform='translate(80 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>14</text></g><g fill='#444' transform='translate(120 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>15</text></g><g fill='#444' transform='translate(160 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>16</text></g><g fill='#444' transform='translate(200 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>17</text></g><g fill='#444' transform='translate(240 120) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>18</text></g><g fill='#0cf' transform='translate(0 160) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>19</text></g><g fill='#444' transform='translate(80 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>20</text></g><g fill='#444' transform='translate(120 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>21</text></g><g fill='#444' transform='translate(160 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>22</text></g><g fill='#444' transform='translate(200 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>23</text></g><g fill='#444' transform='translate(240 160) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>24</text></g><g fill='#0cf' transform='translate(0 200) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>25</text></g><g fill='#444' transform='translate(80 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>26</text></g><g fill='#444' transform='translate(120 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>27</text></g><g fill='#444' transform='translate(160 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>28</text></g><g fill='#444' transform='translate(200 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>29</text></g><g fill='#444' transform='translate(240 200) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>30</text></g><g fill='#0cf' transform='translate(0 240) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#444' transform='translate(40 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>31</text></g><g fill='#444' transform='translate(80 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>32</text></g><g fill='#444' transform='translate(120 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>33</text></g><g fill='#444' transform='translate(160 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>34</text></g><g fill='#444' transform='translate(200 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>35</text></g><g fill='#444' transform='translate(240 240) scale(12)'><circle r='0.8'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'>36</text></g><g fill='#0cf' transform='translate(0 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(40 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(80 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(120 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(160 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(200 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g><g fill='#0cf' transform='translate(240 280) scale(12)'><path d='M -0.8 0.4 Q -0.4 1 0 0.4 T 0.8 0.4 V -0.4 Q 0.4 -1 0 -0.4 T -0.8 -0.4 z'/><text fill='#fff' font-size='1' x='0' y='0' text-anchor='middle' dominant-baseline='central'></text></g></svg>
<p>--&gt;</p>
<h2 id="counting2">appendix: an alternative counting method</h2>
<p>If you're happy with the strategies described,
you can skip this section.
But there's a further simplification
that can help speed up the counting,
at the cost of requiring a little more math.</p>
<p>Consider the second formula from before.</p>
<blockquote>
<p><span class='var'>remaining pools</span> = (<span class='var'>width</span>−1)×(<span class='var'>height</span>−1) − 3×(<span class='var'># shaded</span>)<br />
  + <span class='var'># shaded on top edge</span><br />
  + <span class='var'># shaded on bottom edge</span><br />
  + <span class='var'># shaded on left edge</span><br />
  + <span class='var'># shaded on right edge</span></p>
</blockquote>
<p>If we're applying penalty theory to the whole puzzle,
we can establish a better baseline.
Usually,
we're shading as many edge cells as possible,
so it makes more sense to count the <strong>deficit</strong> of shaded edge cells.</p>
<blockquote>
<p><span class='var'>remaining pools</span> = (<span class='var'>width</span>−1)×(<span class='var'>height</span>−1) − 3×(<span class='var'># shaded</span>)<br />
  + <span class='var'>max # shaded on top edge</span> − <span class='var'># missing on top edge</span><br />
  + <span class='var'>max # shaded on bottom edge</span> − <span class='var'># missing on bottom edge</span><br />
  + <span class='var'>max # shaded on left edge</span> − <span class='var'># missing on left edge</span><br />
  + <span class='var'>max # shaded on right edge</span> − <span class='var'># missing on right edge</span></p>
</blockquote>
<p>What's the maximum number of cells we can shade on an edge?
Consider the top and bottom edges together.
If <span class='var'>width</span> is even,
we can shade <span class='var'>width</span>÷2 cells on both the top and bottom,
for a total of <span class='var'>width</span> combined.
If <span class='var'>width</span> is odd,
we can shade (<span class='var'>width</span>+1)÷2 cells on both the top and bottom,
for a total of <span class='var'>width</span>+1 combined.
So we get:</p>
<blockquote>
<p><span class='var'>remaining pools</span> = (<span class='var'>width</span>−1)×(<span class='var'>height</span>−1) − 3×(<span class='var'># shaded</span>)<br />
  + <span class='var'>width</span> + <span class='var'>1 if width is odd</span><br />
  + <span class='var'>height</span> + <span class='var'>1 if height is odd</span><br />
  − <span class='var'># missing on each edge</span></p>
</blockquote>
<p>Doing some simplification
and moving things around so that everything is positive,
we end up with:</p>
<blockquote>
<p><span class='var'>width</span>×<span class='var'>height</span> + 1 + <span class='var'>1 if width is odd</span> + <span class='var'>1 if height is odd</span><br />
  = 3×(<span class='var'># shaded</span>) + <span class='var'>remaining pools</span> + <span class='var'># missing on each edge</span></p>
</blockquote>
<p>The left-hand side of this equation
doesn't depend on the shaded cells at all!
So you can compute it immediately upon seeing the puzzle.
If you think of this as how many <strong>penalties</strong> you have available,
then:</p>
<ul>
<li>Each shaded cell costs 3 penalties.</li>
<li>Each remaining pool (not connected to the ocean) costs 1 penalty.</li>
<li>Each missing shaded cell on each edge costs 1 penalty.</li>
</ul>
<p>As a quick demonstration,
for the example puzzle from the previous section,
the left-hand quantity is 10×8 + 1 = <strong>81</strong>,
and just placing all the shaded cells costs 27×3 = <strong>81</strong> penalties.
So this is another way of seeing
that all pools must connect to the ocean,
and that the edges must hold as many shaded cells as possible.</p>
<p>For the mathematically inclined,
we can produce a similar formula for arbitrary rectangles:</p>
<blockquote>
<p>penalties = (<span class='var'>width</span>−1)×(<span class='var'>height</span>−1) + Σ<sub>b</sub> ⌈b/2⌉</p>
</blockquote>
<p>where the sum is over lengths of edges touching the border.
For shapes more complicated than rectangles,
I think it's easiest to use the other method.</p>
<h2 id="etym">appendix: an etymological edification</h2>
<p>So anyway, why are these things called &quot;pools&quot;?</p>
<p>The original description of penalty theory
used the <strong>graph of unshaded cells</strong> instead of gridpoints.
This is just the thing you get if you draw a line
between every touching pair of unshaded cells.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><rect fill='#000' x='120' y='0' width='40' height='40'/><rect fill='#000' x='40' y='40' width='40' height='40'/><rect fill='#000' x='120' y='80' width='40' height='40'/><rect fill='#000' x='80' y='120' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/></g><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 20.0 V 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 20.0 H 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 60.0 V 100.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 100.0 V 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 100.0 H 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 140.0 V 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 140.0 H 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 20.0 180.0 H 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 60.0 20.0 H 100.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 60.0 100.0 V 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 60.0 100.0 H 100.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 60.0 140.0 V 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 60.0 180.0 H 100.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 100.0 20.0 V 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 100.0 60.0 V 100.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 100.0 60.0 H 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 100.0 180.0 H 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 140.0 60.0 H 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 140.0 140.0 V 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 140.0 140.0 H 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 140.0 180.0 H 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 180.0 20.0 V 60.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 180.0 60.0 V 100.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 180.0 100.0 V 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 180.0 140.0 V 180.0'/></svg>
<p>Then,
instead of pools,
it talked about &quot;fundamental loops&quot;.
There are five of them in this example.</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><rect fill='#000' x='120' y='0' width='40' height='40'/><rect fill='#000' x='40' y='40' width='40' height='40'/><rect fill='#000' x='120' y='80' width='40' height='40'/><rect fill='#000' x='80' y='120' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/></g><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 20.0 V 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 20.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 60.0 V 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 100.0 V 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 100.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 140.0 V 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 140.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 180.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 20.0 H 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 100.0 V 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 100.0 H 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 140.0 V 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 180.0 H 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 20.0 V 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 60.0 V 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 60.0 H 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 180.0 H 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 60.0 H 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 140.0 V 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 140.0 H 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 180.0 H 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 20.0 V 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 60.0 V 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 100.0 V 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 140.0 V 180.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 24.0 24.0 V 60.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 24.0 24.0 H 60.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 24.0 60.0 V 96.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 24.0 96.0 H 60.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 60.0 24.0 H 96.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 60.0 96.0 H 96.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 96.0 24.0 V 60.0'/><path fill='none' stroke='#0ff' stroke-width='2' d='M 96.0 60.0 V 96.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 64.0 104.0 V 140.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 64.0 104.0 H 104.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 64.0 140.0 V 176.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 64.0 176.0 H 100.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 104.0 64.0 V 104.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 104.0 64.0 H 140.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 100.0 176.0 H 136.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 140.0 64.0 H 176.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 136.0 136.0 V 176.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 136.0 136.0 H 176.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 176.0 64.0 V 100.0'/><path fill='none' stroke='#00f' stroke-width='2' d='M 176.0 100.0 V 136.0'/><path fill='none' stroke='#f0f' stroke-width='2' d='M 24.0 104.0 V 136.0'/><path fill='none' stroke='#f0f' stroke-width='2' d='M 24.0 104.0 H 56.0'/><path fill='none' stroke='#f0f' stroke-width='2' d='M 24.0 136.0 H 56.0'/><path fill='none' stroke='#f0f' stroke-width='2' d='M 56.0 104.0 V 136.0'/><path fill='none' stroke='#0f0' stroke-width='2' d='M 24.0 144.0 V 176.0'/><path fill='none' stroke='#0f0' stroke-width='2' d='M 24.0 144.0 H 56.0'/><path fill='none' stroke='#0f0' stroke-width='2' d='M 24.0 176.0 H 56.0'/><path fill='none' stroke='#0f0' stroke-width='2' d='M 56.0 144.0 V 176.0'/><path fill='none' stroke='#80f' stroke-width='2' d='M 144.0 144.0 V 176.0'/><path fill='none' stroke='#80f' stroke-width='2' d='M 144.0 144.0 H 176.0'/><path fill='none' stroke='#80f' stroke-width='2' d='M 144.0 176.0 H 176.0'/><path fill='none' stroke='#80f' stroke-width='2' d='M 176.0 144.0 V 176.0'/></svg>
<p>A loop is a path you can draw along these lines
that starts and ends at the same place.</p>
<p>But why doesn't this one count?</p>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><rect fill='#000' x='120' y='0' width='40' height='40'/><rect fill='#000' x='40' y='40' width='40' height='40'/><rect fill='#000' x='120' y='80' width='40' height='40'/><rect fill='#000' x='80' y='120' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/></g><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 20.0 V 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 20.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 60.0 V 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 100.0 V 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 100.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 140.0 V 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 140.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 20.0 180.0 H 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 20.0 H 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 100.0 V 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 100.0 H 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 140.0 V 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 60.0 180.0 H 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 20.0 V 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 60.0 V 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 60.0 H 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 100.0 180.0 H 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 60.0 H 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 140.0 V 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 140.0 H 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 140.0 180.0 H 180.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 20.0 V 60.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 60.0 V 100.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 100.0 V 140.0'/><path fill='none' stroke='#aaa' stroke-width='2' d='M 180.0 140.0 V 180.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 24.0 104.0 V 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 24.0 104.0 H 56.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 24.0 140.0 V 176.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 24.0 176.0 H 56.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 56.0 104.0 V 140.0'/><path fill='none' stroke='#f00' stroke-width='2' d='M 56.0 140.0 V 176.0'/></svg>
<p>That's what &quot;fundamental&quot; means:
the red loop is just a combination of the pink loop and the green loop.
More explicitly,
the number of fundamental loops is the biggest number of loops you can choose
so that none of them are combinations of any others.
(There can be many ways to do this;
for example,
you could take the pink loop and the red loop,
but then you couldn't count the green loop.)
There are also a few extra considerations
when applying penalty theory to only part of the puzzle.
This all feels more confusing to me,
which is why my presentation uses pools instead.</p>
<p>But if you like loops more,
you can almost just replace the word &quot;pool&quot; with &quot;loop&quot; on this page
and keep basically everything else intact.
In fact,
pools and loops are almost &quot;the same thing&quot; –
in mathematical jargon,
pools are the <strong>dual</strong> of a particular basis of loops.
That's why I chose the name &quot;pool&quot;:
it's &quot;loop&quot; backwards.</p>
<h2 id="patterns">appendix: patterns, pitfalls, and practice</h2>
<p>Here are a few more examples of various levels of trickiness.
Many of them are easy to solve without penalty theory –
the point is to make sure you understand how the penalty calculations work.
You can try working through them yourself first,
for practice.</p>
<p>For all of these,</p>
<ul>
<li><strong>Click the first image</strong> to try the puzzle.</li>
<li><strong>Click the second image</strong> to see the solution.</li>
<li><strong>Click the gray bars below</strong> to read the explanations.</li>
</ul>
<h3>puzzle 1</h3>
<a href='https://puzz.link/p?heyawake/5/5/16cge00e05' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>0</text><rect fill='black' x='37.8' y='37.8' width='124.4' height='4.4'/><rect fill='black' x='37.8' y='157.8' width='124.4' height='4.4'/><rect fill='black' x='37.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='157.8' y='37.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='60.0' y='60.0' text-anchor='middle' dominant-baseline='central'>5</text></g></a></svg>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' class='spoiler' style='vertical-align:middle' width='220' height='220' viewBox='-10 -10 220 220'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='220' height='220'/><rect fill='#a0ffa0' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#000' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#000' x='120' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#000' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 200'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 200'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='197.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='204.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='204.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>0</text><rect fill='black' x='37.8' y='37.8' width='124.4' height='4.4'/><rect fill='black' x='37.8' y='157.8' width='124.4' height='4.4'/><rect fill='black' x='37.8' y='37.8' width='4.4' height='124.4'/><rect fill='black' x='157.8' y='37.8' width='4.4' height='124.4'/><text fill='#fff' font-size='28' x='60.0' y='60.0' text-anchor='middle' dominant-baseline='central'>5</text></g></svg>
<p><em>Region to apply penalty to</em>: <span class='spoiler'>the 5 room</span></p>
<p><em>Computation</em>: <span class='spoiler'>16 pools available, costs at least 3×5 = 15 pools</span></p>
<p><em>Explanation</em>: <span class='spoiler'>This might trip you up at first. It seems like the solution is maximally efficient, but shouldn't we have 16 − 15 = 1 extra pool? In fact, this region doesn't connect to the ocean at all, so there is indeed necessarily at least 1 pool left over.</span></p>
<h3>puzzle 2</h3>
<a href='https://puzz.link/p?heyawake/6/6/1157110e7k8071211' target='_blank'><svg xmlns='http://www.w3.org/2000/svg' font-family='main' style='vertical-align:middle' width='260' height='260' viewBox='-10 -10 260 260'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='260' height='260'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 240'/><rect fill='black' x='-2.2' y='-2.2' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='237.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='237.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='244.4'/><text fill='#000' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>7</text><rect fill='black' x='197.8' y='-2.2' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='124.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='220.0' y='20.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='-2.2' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='-2.2' y='117.8' width='124.4' height='4.4'/><rect fill='black' x='-2.2' y='77.8' width='4.4' height='44.4'/><rect fill='black' x='117.8' y='77.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='20.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='117.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='157.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='117.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='117.8' width='4.4' height='44.4'/><text fill='#000' font-size='28' x='140.0' y='140.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='197.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='237.8' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='117.8' width='4.4' height='124.4'/><rect fill='black' x='237.8' y='117.8' width='4.4' height='124.4'/><text fill='#000' font-size='28' x='220.0' y='140.0' text-anchor='middle' dominant-baseline='central'>1</text></g></a></svg>
<svg xmlns='http://www.w3.org/2000/svg' font-family='main' class='spoiler' style='vertical-align:middle' width='260' height='260' viewBox='-10 -10 260 260'><g shape-rendering='crispEdges'><rect fill='white' x='-10' y='-10' width='260' height='260'/><rect fill='#000' x='0' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='0' width='40' height='40'/><rect fill='#000' x='80' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='0' width='40' height='40'/><rect fill='#000' x='200' y='0' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='40' width='40' height='40'/><rect fill='#000' x='160' y='40' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='40' width='40' height='40'/><rect fill='#000' x='0' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='80' width='40' height='40'/><rect fill='#000' x='80' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='80' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='120' width='40' height='40'/><rect fill='#000' x='40' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='120' width='40' height='40'/><rect fill='#000' x='120' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='120' width='40' height='40'/><rect fill='#000' x='200' y='120' width='40' height='40'/><rect fill='#a0ffa0' x='0' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='80' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='160' y='160' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='160' width='40' height='40'/><rect fill='#000' x='0' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='40' y='200' width='40' height='40'/><rect fill='#000' x='80' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='120' y='200' width='40' height='40'/><rect fill='#000' x='160' y='200' width='40' height='40'/><rect fill='#a0ffa0' x='200' y='200' width='40' height='40'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 40 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 80 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 120 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 160 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 200 0 V 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 40 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 80 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 120 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 160 H 240'/><path fill='none' stroke='#7f7f7f' stroke-width='1' d='M 0 200 H 240'/><rect fill='black' x='-2.2' y='-2.2' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='237.8' width='244.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='-2.2' y='-2.2' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='237.8' width='204.4' height='4.4'/><rect fill='black' x='-2.2' y='-2.2' width='4.4' height='244.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='244.4'/><text fill='#fff' font-size='28' x='20.0' y='20.0' text-anchor='middle' dominant-baseline='central'>7</text><rect fill='black' x='197.8' y='-2.2' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='-2.2' width='4.4' height='124.4'/><rect fill='black' x='237.8' y='-2.2' width='4.4' height='124.4'/><text fill='#fff' font-size='28' x='220.0' y='20.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='-2.2' y='77.8' width='124.4' height='4.4'/><rect fill='black' x='-2.2' y='117.8' width='124.4' height='4.4'/><rect fill='black' x='-2.2' y='77.8' width='4.4' height='44.4'/><rect fill='black' x='117.8' y='77.8' width='4.4' height='44.4'/><text fill='#fff' font-size='28' x='20.0' y='100.0' text-anchor='middle' dominant-baseline='central'>2</text><rect fill='black' x='117.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='157.8' width='44.4' height='4.4'/><rect fill='black' x='117.8' y='117.8' width='4.4' height='44.4'/><rect fill='black' x='157.8' y='117.8' width='4.4' height='44.4'/><text fill='#fff' font-size='28' x='140.0' y='140.0' text-anchor='middle' dominant-baseline='central'>1</text><rect fill='black' x='197.8' y='117.8' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='237.8' width='44.4' height='4.4'/><rect fill='black' x='197.8' y='117.8' width='4.4' height='124.4'/><rect fill='black' x='237.8' y='117.8' width='4.4' height='124.4'/><text fill='#fff' font-size='28' x='220.0' y='140.0' text-anchor='middle' dominant-baseline='central'>1</text></g></svg>
<p><em>Region to apply penalty to</em>: <span class='spoiler'>the whole puzzle</span></p>
<p><em>Computation</em>: <span class='spoiler'>25 pools available, costs at least 3×12 − 3 − 3 − 3 − 2 = 25 pools</span></p>
<p><em>Explanation</em>: <span class='spoiler'>If you deduce that two edges next to each other both have the maximum number of shaded cells that can fit, you can safely shade the corner between them. But in this example, the right edge is inefficient – you should be careful to not falsely apply this &quot;deduction&quot; in this case.</span></p>
<!-- ## appendix: for weirdos #weird -->
<!-- If this is confusing, -->
<!-- you could also imagine -->
<!-- that the subregion you're doing penalty on -->
<!-- is actually one cell bigger, -->
<!-- and it also includes whichever of the two cells is shaded. -->
<!-- This gains two pools -->
<!-- (from the region being bigger) -->
<!-- but loses three pools -->
<!-- (from having to place another shaded cell), -->
<!-- for the same net result. -->

<h2 id='comments'>comments</h2>
<p><i>There are no comments yet.</i></p>
<form id='commentform' method='post' action='https://dyn.tck.mn/comment'>
    <p><label>name: <input name='name'></label></p>
    <p><label>contact (private, optional): <input name='cont'></label></p>
    <p id='commentinfo'>
        <a href='/bloginfo' target='_blank'>formatting</a> is supported.
        comments require manual approval.
    </p>
    <p><textarea name='comm' rows='5'></textarea></p>
    <p>
        <input type='hidden' name='post' value='blog/penalty-theory'>
        <input type='submit' id='commentsubmit' value='leave a comment'>
        <span id='commentfeedback'></span>
    </p>
</form>

        </main>

    </body>
</html>
